<% contents = @edition.document_type.contents.map { |field|
  {
    field: field.label,
    value: render("versioned/documents/fields/#{field.type}", field: field, edition: @edition)
  }
} %>

<% edition_metadata = [] %>

<% if @edition.number > 1 %>
  <% edition_metadata << {
      field: t("documents.show.contents.items.update_type"),
      value: t("documents.show.contents.update_type.#{@edition.update_type}"),
  } %>
<% end %>

<% if @edition.number > 1 && @edition.update_type == "major" %>
  <% edition_metadata << {
    field: t("documents.show.contents.items.change_note"),
    value: @edition.change_note,
  } %>
<% end %>

<%= render "components/summary", {
  id: "content",
  title: {
    text: t("documents.show.contents.title"),
    change_url: !@edition.live && versioned_edit_document_path(@edition.document)
  },
  items: [
    {
      field: t("documents.show.contents.items.title"),
      value: @edition.title
    },
    {
      field: t("documents.show.contents.items.summary"),
      value: @edition.summary
    }
  ] + contents + edition_metadata
} %>
